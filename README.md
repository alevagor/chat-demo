# Support Ticket Chat Demo

–¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Ç–∏–∫–µ—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Support Service –∑–∞–ø—É—â–µ–Ω –Ω–∞ `http://localhost:3000`
2. –û—Ç–∫—Ä–æ–π—Ç–µ `index.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ç–∏–∫–µ—Ç –∏–ª–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É

## üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

-   ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ UI
-   ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ç–∏–∫–µ—Ç–∞–º
-   ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ WebSocket
-   ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
-   ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–∏–∫–µ—Ç–µ (—Å—Ç–∞—Ç—É—Å, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç)
-   ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π (USER, AGENT, BOT)

### WebSocket —Å–æ–±—ã—Ç–∏—è:

**–ö–ª–∏–µ–Ω—Ç ‚Üí –°–µ—Ä–≤–µ—Ä:**

-   `join_ticket` - –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Ç–∏–∫–µ—Ç—É

    ```javascript
    socket.emit('join_ticket', { ticketId: 'clx123...' });
    ```

-   `send_message` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
    ```javascript
    socket.emit('send_message', {
    	ticketId: 'clx123...',
    	senderId: 'user1',
    	senderType: 'USER',
    	content: '–ü—Ä–∏–≤–µ—Ç!',
    	messageType: 'TEXT',
    });
    ```

**–°–µ—Ä–≤–µ—Ä ‚Üí –ö–ª–∏–µ–Ω—Ç:**

-   `ticket:history` - –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Ç–∏–∫–µ—Ç–∞
-   `message:new` - –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ç–∏–∫–µ—Ç–µ
-   `ticket:new_message` - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ (–¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤)
-   `error` - –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ URL —Å–µ—Ä–≤–µ—Ä–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É URL —Å–µ—Ä–≤–µ—Ä–∞ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã URL –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

**–ß–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã URL:**

```
https://your-username.github.io/chat-demo/?apiUrl=http://medprof.twc1.net:3003
–∏–ª–∏
https://your-username.github.io/chat-demo/?server=http://medprof.twc1.net:3003
```

**–ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞):**

```javascript
window.API_URL = 'http://medprof.twc1.net:3003';
// –∏–ª–∏
window.SERVER_URL = 'http://medprof.twc1.net:3003';
```

**–ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:**

-   `API_BASE_URL` - URL REST API (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `http://medprof.twc1.net:3003/api/support`)
-   `WS_URL` - URL WebSocket —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `http://medprof.twc1.net:3003`)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

1. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL (`?apiUrl=` –∏–ª–∏ `?server=`)
2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`window.API_URL` –∏–ª–∏ `window.SERVER_URL`)
3. –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–¢–µ–∫—É—â–∏–π URL —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –≤ —Ä–∞–∑–¥–µ–ª–µ "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∏–∫–µ—Ç–µ".

## üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞:**

    - –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–∏–∫–µ—Ç"
    - –í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
    - –¢–∏–∫–µ—Ç –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω

2. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É —Ç–∏–∫–µ—Ç—É:**

    - –í–≤–µ–¥–∏—Ç–µ ID —Ç–∏–∫–µ—Ç–∞ –≤ –ø–æ–ª–µ "Ticket ID"
    - –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Ç–∏–∫–µ—Ç—É"

3. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π:**

    - –í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
    - –ù–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å" –∏–ª–∏ Enter
    - –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –≤ —á–∞—Ç–µ –∏ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ WebSocket

4. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è:**
    - –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –≤ –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ (USER, AGENT, BOT)
    - –í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞

## üé® –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

-   **–õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å:** –ß–∞—Ç —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ —Ç–∏–∫–µ—Ç–∞
-   **–ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å:** –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∏–∫–µ—Ç–µ –∏ –¥–µ–π—Å—Ç–≤–∏—è

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API

–ß–∞—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç REST API –¥–ª—è:

-   –°–æ–∑–¥–∞–Ω–∏—è —Ç–∏–∫–µ—Ç–æ–≤: `POST /api/support/tickets`
-   –ü–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–∏–∫–µ—Ç–µ: `GET /api/support/tickets/:id`

–ò WebSocket –¥–ª—è:

-   –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Ç–∏–∫–µ—Ç—É
-   –û—Ç–ø—Ä–∞–≤–∫–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
